<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Surprise üéâ</title>
<style>
  :root{
    --bg:#0b1220; --card:#111b2e; --text:#eaf1ff; --muted:#a9b7d6;
    --a:#7c5cff; --b:#33d1ff; --c:#3be08f; --d:#ffd166; --e:#ff5c8a;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:flex; justify-content:center; align-items:center;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
    background:
      radial-gradient(1200px 600px at 15% 10%, rgba(124,92,255,.35), transparent 60%),
      radial-gradient(900px 500px at 85% 25%, rgba(51,209,255,.25), transparent 60%),
      radial-gradient(800px 450px at 60% 90%, rgba(59,224,143,.18), transparent 55%),
      var(--bg);
    overflow:hidden;
  }
  canvas{position:fixed; inset:0; pointer-events:none}
  .wrap{width:min(920px,92vw); padding:18px; position:relative; z-index:2}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.14);
    border-radius:22px;
    box-shadow:0 30px 90px rgba(0,0,0,.5);
    padding:22px;
    backdrop-filter: blur(6px);
  }
  .top{
    display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;
  }
  .pill{
    display:inline-flex; align-items:center; gap:10px;
    padding:8px 12px; border-radius:999px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.12);
    color:var(--muted); font-weight:600; font-size:13px;
  }
  .dot{width:10px;height:10px;border-radius:50%;
    background:conic-gradient(from 90deg, var(--a), var(--b), var(--c), var(--d), var(--e), var(--a));
    box-shadow:0 0 0 6px rgba(124,92,255,.14);
  }
  h1{
    margin:14px 0 6px;
    font-size:clamp(28px,4.2vw,46px);
    line-height:1.05;
  }
  .sub{margin:0 0 16px; color:var(--muted); font-size:15px}
  .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:14px}
  @media (max-width:820px){ .grid{grid-template-columns:1fr} }
  .panel{
    background:rgba(17,27,46,.75);
    border:1px solid rgba(255,255,255,.12);
    border-radius:18px;
    padding:16px;
  }
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  input, textarea{
    width:100%; padding:12px 12px; border-radius:14px;
    background:rgba(0,0,0,.22); color:var(--text);
    border:1px solid rgba(255,255,255,.14);
    outline:none;
  }
  textarea{min-height:120px; resize:vertical}
  .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
  button{
    border:0; cursor:pointer; border-radius:14px;
    padding:12px 14px; font-weight:800;
    background:linear-gradient(90deg, var(--a), var(--b));
    color:#071022;
    transition:transform .08s ease, filter .2s ease;
  }
  button:active{transform:scale(.98)}
  .ghost{
    background:rgba(255,255,255,.08);
    color:var(--text);
    border:1px solid rgba(255,255,255,.14);
  }
  .note{color:var(--muted); font-size:13px; margin-top:10px}
  .letterWrap{position:relative; margin-top:14px}
  .envelope{
    border-radius:18px;
    border:1px dashed rgba(255,255,255,.22);
    background:rgba(255,255,255,.06);
    padding:16px;
    display:none;
    transform-origin: top;
    animation: pop .6s ease both;
  }
  @keyframes pop{
    from{transform:translateY(10px) scale(.98); opacity:0}
    to{transform:translateY(0) scale(1); opacity:1}
  }
  .spark{display:inline-block; animation: bounce 1.4s ease-in-out infinite}
  @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
  .big{
    font-size:clamp(18px,2.2vw,22px); font-weight:800;
    background:linear-gradient(90deg, var(--d), var(--e));
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="wrap">
  <div class="card">
    <div class="top">
      <div class="pill"><span class="dot"></span><span>Surprise cod√©e üéÅ</span></div>
      <div class="pill">Clique ‚Üí animations ‚Üí lettre üíå <span class="spark">‚ú®</span></div>
    </div>

    <h1>Joyeux anniversaire, <span id="who">Mon amie</span> üéÇ</h1>
    <p class="sub">Une petite page surprise : confettis, musique (option), et une lettre √† la fin.</p>

    <div class="grid">
      <div class="panel">
        <div class="big">√âtape 1 : lance la surprise</div>
        <div class="btns">
          <button id="go">Lancer üéâ</button>
          <button class="ghost" id="open" disabled>Ouvrir la lettre üíå</button>
          <button class="ghost" id="reset">Recommencer</button>
        </div>

        <div class="letterWrap">
          <div class="envelope" id="env"></div>
          <div class="note">Astuce : tu peux personnaliser le pr√©nom et la lettre √† droite avant d‚Äôenvoyer le lien.</div>
        </div>
      </div>

      <div class="panel">
        <div class="big">Personnalisation</div>

        <label class="note">Pr√©nom</label>
        <input id="name" placeholder="Ex : A√Øcha" />

        <label class="note" style="margin-top:10px; display:block;">Lettre</label>
        <textarea id="msg">Salut [PR√âNOM] üíõ

Aujourd‚Äôhui c‚Äôest ton jour üéÇ
Je te souhaite une ann√©e pleine de paix, de bonheur et de r√©ussite.
Merci d‚Äô√™tre toi, vraiment.

Joyeux anniversaire ‚ù§Ô∏è

‚Äî Aziz</textarea>

        <div class="note">
          (Option) Ajoute une musique : colle un lien mp3 direct dans le code si tu veux, sinon laisse.
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ---------- Confetti canvas ----------
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");
  let W, H, conf = [], running = false;

  const colors = ["#7c5cff","#33d1ff","#3be08f","#ffd166","#ff5c8a","#9bff57"];
  function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resize);
  resize();

  function spawn(n=180){
    conf = [];
    for(let i=0;i<n;i++){
      conf.push({
        x: Math.random()*W,
        y: Math.random()*H - H,
        vx:(Math.random()*2-1)*1.3,
        vy:2.4+Math.random()*4.6,
        s:6+Math.random()*10,
        a:Math.random()*Math.PI*2,
        w: (Math.random()*2-1)*0.18,
        c: colors[(Math.random()*colors.length)|0]
      });
    }
  }

  function frame(){
    if(!running) return;
    ctx.clearRect(0,0,W,H);
    for(const p of conf){
      p.a += p.w;
      p.x += p.vx + Math.sin(p.a)*1.5;
      p.y += p.vy;

      if(p.y > H+30){ p.y = -30; p.x = Math.random()*W; }

      ctx.fillStyle = p.c;
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.a);
      ctx.fillRect(-p.s/2, -p.s/2, p.s, p.s);
      ctx.restore();
    }
    requestAnimationFrame(frame);
  }

  // ---------- UI ----------
  const who = document.getElementById("who");
  const name = document.getElementById("name");
  const msg  = document.getElementById("msg");
  const go   = document.getElementById("go");
  const open = document.getElementById("open");
  const reset= document.getElementById("reset");
  const env  = document.getElementById("env");

  function renderLetter(){
    const n = (name.value.trim() || "toi");
    who.textContent = name.value.trim() || "Mon amie";
    const raw = msg.value || "";
    const final = raw.replaceAll("[PR√âNOM]", n);
    env.textContent = "üíå Lettre\n\n" + final;
  }
  name.addEventListener("input", renderLetter);
  msg.addEventListener("input", renderLetter);
  renderLetter();

  let t = 0, countdown = null;

  go.addEventListener("click", () => {
    renderLetter();
    env.style.display = "none";
    open.disabled = true;

    spawn(220);
    running = true;
    frame();

    let sec = 4;
    go.textContent = `Patiente‚Ä¶ ${sec}s`;
    clearInterval(countdown);
    countdown = setInterval(() => {
      sec--;
      go.textContent = sec>0 ? `Patiente‚Ä¶ ${sec}s` : "Lancer üéâ";
      if(sec<=0){
        clearInterval(countdown);
        open.disabled = false;
      }
    }, 900);
  });

  open.addEventListener("click", () => {
    env.style.display = "block";
    env.scrollIntoView({behavior:"smooth", block:"start"});
  });

  reset.addEventListener("click", () => {
    running = false;
    ctx.clearRect(0,0,W,H);
    env.style.display = "none";
    open.disabled = true;
    go.textContent = "Lancer üéâ";
  });

  // Auto-lance si tu ajoutes ?auto=1 dans le lien
  if(new URLSearchParams(location.search).get("auto") === "1"){
    setTimeout(()=>go.click(), 450);
  }
</script>
</body>
</html>
